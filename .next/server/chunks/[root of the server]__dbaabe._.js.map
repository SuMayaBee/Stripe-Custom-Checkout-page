{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///home/msi/Desktop/Diligent%20Travels/nextjs-stripe-custom-checkout/src/lib/clients/stripe/server.ts"],"sourcesContent":["import Stripe from \"stripe\";\n\nif (!process.env.STRIPE_SECRET_KEY) {\n\tthrow new Error(\"STRIPE_SECRET_KEY is not set\");\n}\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n\ttypescript: true,\n});\n\nexport { stripe };\n"],"names":[],"mappings":";;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAE;IACnC,MAAM,IAAI,MAAM;AACjB;AAEA,MAAM,SAAS,IAAI,4MAAA,CAAA,UAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAE;IACxD,YAAY;AACb"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///home/msi/Desktop/Diligent%20Travels/nextjs-stripe-custom-checkout/src/features/billing/config/plans.tsx"],"sourcesContent":["import {\n\tPlusCircle,\n\tGlobe,\n\tUsers,\n\tCurrencyDollar,\n\tChartLineUp,\n\tLockKey,\n\tLightning,\n\tStar,\n\tRocket,\n} from \"@phosphor-icons/react/dist/ssr\";\nimport { PricingCardProps } from \"../components/pricing-card\";\n\nexport const PLAN_LOOKUP_KEYS = {\n\tBASIC: \"plan_basic_monthly\",\n\tPRO: \"plan_pro_monthly\",\n\tENTERPRISE: \"plan_enterprise_monthly\",\n} as const;\n\nexport const plans: PricingCardProps[] = [\n\t{\n\t\ttitle: \"Basic Plan\",\n\t\tdescription: \"Essential features for small projects and startups.\",\n\t\tprice: 9,\n\t\tpriceId: PLAN_LOOKUP_KEYS.BASIC,\n\t\ticon: <Rocket className='w-6 h-6 text-primary' weight='duotone' />,\n\t\taccentColor: \"text-emerald-500\",\n\t\tfeatures: [\n\t\t\t{\n\t\t\t\ticon: <Users className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>5</span> Authorized Users\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <Globe className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>10</span> Currencies\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <CurrencyDollar className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>5,000</span> Transactions\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <ChartLineUp className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>1,000</span> Account Limit\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PlusCircle className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>25</span> Investment Portfolios\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <LockKey className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Enhanced</span> Security\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\ttitle: \"Pro Plan\",\n\t\tdescription: \"Ideal for small businesses and growing teams.\",\n\t\tpriceId: PLAN_LOOKUP_KEYS.PRO,\n\t\tprice: 29,\n\t\ticon: <Lightning className='w-6 h-6 text-primary' weight='duotone' />,\n\t\taccentColor: \"text-blue-500\",\n\t\tfeatures: [\n\t\t\t{\n\t\t\t\ticon: <Users className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>10</span> Authorized Users\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <Globe className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>20</span> Currencies\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <CurrencyDollar className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>10,000</span> Transactions\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <ChartLineUp className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Unlimited</span> Account Limit\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PlusCircle className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>50</span> Investment Portfolios\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <LockKey className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Advanced</span> Security Features\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\ttitle: \"Enterprise Plan\",\n\t\tdescription: \"For large organizations with complex needs.\",\n\t\tpriceId: PLAN_LOOKUP_KEYS.ENTERPRISE,\n\t\tprice: 99,\n\t\ticon: <Star className='w-6 h-6 text-primary' weight='duotone' />,\n\t\taccentColor: \"text-purple-500\",\n\t\tfeatures: [\n\t\t\t{\n\t\t\t\ticon: <Users className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Unlimited</span> Users\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <Globe className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>All</span> Currencies\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <CurrencyDollar className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Unlimited</span> Transactions\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <ChartLineUp className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Unlimited</span> Accounts\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PlusCircle className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Custom</span> Investment Solutions\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <LockKey className='w-5 h-5 text-default-foreground/60' />,\n\t\t\t\ttext: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className='font-medium'>Enterprise-grade</span> Security\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t],\n\t},\n];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 597, "column": 0}, "map": {"version":3,"sources":["file:///home/msi/Desktop/Diligent%20Travels/nextjs-stripe-custom-checkout/src/app/api/payments/create-payment-intent/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { stripe } from \"@/lib/clients/stripe/server\";\nimport { PLAN_LOOKUP_KEYS } from \"@/features/billing/config/plans\";\nimport { z } from \"zod\";\n\nconst createPaymentIntentSchema = z.object({\n\tlookupKey: z.enum(\n\t\t[PLAN_LOOKUP_KEYS.BASIC, PLAN_LOOKUP_KEYS.PRO, PLAN_LOOKUP_KEYS.ENTERPRISE],\n\t\t{\n\t\t\trequired_error: \"Plan lookup key is required\",\n\t\t\tinvalid_type_error: \"Invalid plan type\",\n\t\t}\n\t),\n});\n\nexport async function POST(request: Request) {\n\ttry {\n\t\tconst body = await request.json();\n\t\tconst result = createPaymentIntentSchema.safeParse(body);\n\n\t\tif (!result.success) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{\n\t\t\t\t\terror: \"Invalid request\",\n\t\t\t\t\tdetails: result.error.issues,\n\t\t\t\t},\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\tconst { lookupKey } = result.data;\n\n\t\tconst prices = await stripe.prices.list({\n\t\t\tlookup_keys: [lookupKey],\n\t\t});\n\n\t\tif (!prices.data.length) {\n\t\t\tthrow new Error(`No price found for lookup key: ${lookupKey}`);\n\t\t}\n\n\t\tconst price = prices.data[0];\n\n\t\tconst paymentIntent = await stripe.paymentIntents.create({\n\t\t\tamount: price.unit_amount || 0,\n\t\t\tcurrency: price.currency,\n\t\t\tautomatic_payment_methods: {\n\t\t\t\tenabled: true,\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\tprice_id: price.id,\n\t\t\t\tlookup_key: lookupKey,\n\t\t\t},\n\t\t});\n\n\t\treturn NextResponse.json({\n\t\t\tclientSecret: paymentIntent.client_secret,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"Error creating payment intent:\", error);\n\n\t\tif (error instanceof z.ZodError) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{\n\t\t\t\t\terror: \"Validation error\",\n\t\t\t\t\tdetails: error.issues,\n\t\t\t\t},\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\treturn NextResponse.json(\n\t\t\t{ error: \"Failed to create payment intent\" },\n\t\t\t{ status: 500 }\n\t\t);\n\t}\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,4BAA4B,uLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1C,WAAW,uLAAA,CAAA,IAAC,CAAC,IAAI,CAChB;QAAC,gJAAA,CAAA,mBAAgB,CAAC,KAAK;QAAE,gJAAA,CAAA,mBAAgB,CAAC,GAAG;QAAE,gJAAA,CAAA,mBAAgB,CAAC,UAAU;KAAC,EAC3E;QACC,gBAAgB;QAChB,oBAAoB;IACrB;AAEF;AAEO,eAAe,KAAK,OAAgB;IAC1C,IAAI;QACH,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,SAAS,0BAA0B,SAAS,CAAC;QAEnD,IAAI,CAAC,OAAO,OAAO,EAAE;YACpB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACvB;gBACC,OAAO;gBACP,SAAS,OAAO,KAAK,CAAC,MAAM;YAC7B,GACA;gBAAE,QAAQ;YAAI;QAEhB;QAEA,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,IAAI;QAEjC,MAAM,SAAS,MAAM,2IAAA,CAAA,SAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YACvC,aAAa;gBAAC;aAAU;QACzB;QAEA,IAAI,CAAC,OAAO,IAAI,CAAC,MAAM,EAAE;YACxB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,WAAW;QAC9D;QAEA,MAAM,QAAQ,OAAO,IAAI,CAAC,EAAE;QAE5B,MAAM,gBAAgB,MAAM,2IAAA,CAAA,SAAM,CAAC,cAAc,CAAC,MAAM,CAAC;YACxD,QAAQ,MAAM,WAAW,IAAI;YAC7B,UAAU,MAAM,QAAQ;YACxB,2BAA2B;gBAC1B,SAAS;YACV;YACA,UAAU;gBACT,UAAU,MAAM,EAAE;gBAClB,YAAY;YACb;QACD;QAEA,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACxB,cAAc,cAAc,aAAa;QAC1C;IACD,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,kCAAkC;QAEhD,IAAI,iBAAiB,uLAAA,CAAA,IAAC,CAAC,QAAQ,EAAE;YAChC,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACvB;gBACC,OAAO;gBACP,SAAS,MAAM,MAAM;YACtB,GACA;gBAAE,QAAQ;YAAI;QAEhB;QAEA,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACvB;YAAE,OAAO;QAAkC,GAC3C;YAAE,QAAQ;QAAI;IAEhB;AACD"}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}